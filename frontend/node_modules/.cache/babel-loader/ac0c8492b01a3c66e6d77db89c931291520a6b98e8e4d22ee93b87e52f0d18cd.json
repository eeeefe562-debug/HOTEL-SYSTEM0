{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\WILLIAM\\\\Desktop\\\\hotel-system\\\\frontend\\\\src\\\\components\\\\cashier\\\\CheckoutModal.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { X, CreditCard, DollarSign, Tag, AlertCircle, CheckCircle } from 'lucide-react';\nimport { createPayment, checkout, getDiscountPresets, applyDiscount } from '../../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CheckoutModal = ({\n  booking,\n  onClose,\n  onSuccess\n}) => {\n  _s();\n  var _safeBooking$late_che, _booking$late_checkou, _booking$late_checkou2;\n  // Estado de notificaciones\n  const [notification, setNotification] = useState(null);\n\n  // PRIMERO: Calcular valores seguros con defaults\n  const safeBooking = booking || {};\n  const currentBalance = safeBooking.current_balance !== undefined ? safeBooking.current_balance : parseFloat(safeBooking.total_amount || 0) + (((_safeBooking$late_che = safeBooking.late_checkout_info) === null || _safeBooking$late_che === void 0 ? void 0 : _safeBooking$late_che.late_checkout_charge) || 0) - parseFloat(safeBooking.amount_paid || 0);\n\n  // SEGUNDO: Todos los hooks\n  const [step, setStep] = useState(currentBalance > 0.01 ? 'payment' : 'confirm');\n  const [discountPresets, setDiscountPresets] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  // Estado del pago - INCLUIR booking_id\n  const [paymentData, setPaymentData] = useState({\n    booking_id: safeBooking.id,\n    amount: currentBalance.toFixed(2),\n    payment_method: 'cash',\n    card_last_digits: '',\n    transaction_reference: '',\n    notes: ''\n  });\n\n  // Estado del descuento\n  const [selectedDiscount, setSelectedDiscount] = useState(null);\n  const [customDiscount, setCustomDiscount] = useState({\n    type: 'percentage',\n    value: '',\n    reason: ''\n  });\n  useEffect(() => {\n    if (safeBooking.id) {\n      loadDiscounts();\n      calculateLateCheckout();\n    }\n  }, [safeBooking.id]);\n\n  // âœ… FunciÃ³n para mostrar notificaciones\n  const showNotification = (message, type = 'info') => {\n    setNotification({\n      message,\n      type\n    });\n    setTimeout(() => setNotification(null), 4000);\n  };\n  const calculateLateCheckout = async () => {\n    try {\n      const {\n        getLateCheckoutPreview\n      } = await import('../../services/api');\n      const preview = await getLateCheckoutPreview(safeBooking.id);\n      if (preview.is_late && preview.late_checkout_charge > 0) {\n        safeBooking.late_checkout_info = {\n          is_late: true,\n          hours_late: preview.hours_late,\n          late_checkout_charge: preview.late_checkout_charge,\n          hourly_rate: preview.hourly_rate\n        };\n      }\n    } catch (error) {\n      console.error('Error al calcular late checkout:', error);\n    }\n  };\n\n  // TERCERO: ValidaciÃ³n DESPUÃ‰S de los hooks\n  if (!booking || !booking.id) {\n    return null;\n  }\n  const loadDiscounts = async () => {\n    try {\n      const data = await getDiscountPresets();\n      setDiscountPresets(data.filter(d => d.is_active));\n    } catch (error) {\n      console.error('Error al cargar descuentos:', error);\n    }\n  };\n  const calculateDiscount = () => {\n    var _safeBooking$late_che2;\n    if (!selectedDiscount && !customDiscount.value) return 0;\n    const baseAmount = parseFloat(safeBooking.total_amount || 0) + (((_safeBooking$late_che2 = safeBooking.late_checkout_info) === null || _safeBooking$late_che2 === void 0 ? void 0 : _safeBooking$late_che2.late_checkout_charge) || 0);\n    if (selectedDiscount) {\n      if (selectedDiscount.discount_type === 'percentage') {\n        return baseAmount * parseFloat(selectedDiscount.discount_value) / 100;\n      }\n      return parseFloat(selectedDiscount.discount_value);\n    }\n    if (customDiscount.value) {\n      if (customDiscount.type === 'percentage') {\n        return baseAmount * parseFloat(customDiscount.value) / 100;\n      }\n      return parseFloat(customDiscount.value);\n    }\n    return 0;\n  };\n  const discountAmount = calculateDiscount();\n  const totalWithDiscount = currentBalance - discountAmount;\n  const finalBalance = totalWithDiscount - parseFloat(paymentData.amount || 0);\n  const handleApplyDiscount = async () => {\n    if (discountAmount === 0) {\n      setStep('payment');\n      return;\n    }\n    setLoading(true);\n    try {\n      const discountData = selectedDiscount ? {\n        discount_preset_id: selectedDiscount.id,\n        discount_type: selectedDiscount.discount_type,\n        discount_value: selectedDiscount.discount_value,\n        reason: selectedDiscount.reason\n      } : {\n        discount_type: customDiscount.type,\n        discount_value: customDiscount.value,\n        reason: customDiscount.reason || 'Descuento personalizado'\n      };\n      await applyDiscount(booking.id, discountData);\n      showNotification(`âœ“ Descuento de Bs. ${discountAmount.toFixed(2)} aplicado exitosamente`, 'success');\n      setStep('payment');\n      const newBalance = totalWithDiscount;\n      setPaymentData({\n        ...paymentData,\n        amount: newBalance.toFixed(2)\n      });\n      setTimeout(() => window.location.reload(), 1500);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      showNotification(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'Error al aplicar descuento', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handlePayment = async () => {\n    if (parseFloat(paymentData.amount) <= 0) {\n      showNotification('El monto debe ser mayor a 0', 'error');\n      return;\n    }\n    if (paymentData.payment_method === 'card' && !paymentData.card_last_digits) {\n      showNotification('Ingrese los Ãºltimos 4 dÃ­gitos de la tarjeta', 'error');\n      return;\n    }\n    setLoading(true);\n    try {\n      await createPayment(paymentData);\n      if (finalBalance <= 0.01) {\n        showNotification('âœ… Pago registrado exitosamente', 'success');\n        setTimeout(() => setStep('confirm'), 1000);\n      } else {\n        showNotification(`Pago registrado. Saldo restante: Bs. ${finalBalance.toFixed(2)}`, 'success');\n        setTimeout(() => onSuccess(), 1500);\n      }\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      showNotification(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || 'Error al registrar pago', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleCheckout = async () => {\n    if (finalBalance > 0.01) {\n      showNotification('Debe cobrar el saldo pendiente antes del checkout', 'error');\n      return;\n    }\n    setLoading(true);\n    try {\n      await checkout(booking.id);\n      showNotification('âœ… Check-out completado. WhatsApp enviado al administrador.', 'success');\n      setTimeout(() => onSuccess(), 2000);\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      showNotification(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.error) || 'Error al realizar checkout', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto relative\",\n      children: [notification && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `absolute top-4 left-4 right-4 z-10 p-4 rounded-lg shadow-2xl animate-bounce ${notification.type === 'success' ? 'bg-green-500 text-white' : notification.type === 'error' ? 'bg-red-500 text-white' : 'bg-blue-500 text-white'}`,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold text-center\",\n          children: notification.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 sticky top-0 z-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-start\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl font-bold mb-1\",\n              children: \"Proceso de Checkout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-blue-100\",\n              children: [booking.full_name || booking.customer_name, \" \\u2022 HAB \", booking.room_number]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-blue-200 mt-1\",\n              children: booking.booking_code\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onClose,\n            className: \"text-white hover:bg-white/20 p-2 rounded\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"w-6 h-6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-4 mt-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex-1 ${step === 'discount' ? 'opacity-100' : 'opacity-50'}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `w-8 h-8 rounded-full flex items-center justify-center ${step === 'discount' ? 'bg-white text-blue-600' : 'bg-blue-500'}`,\n                children: /*#__PURE__*/_jsxDEV(Tag, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm font-medium\",\n                children: \"1. Descuentos\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex-1 ${step === 'payment' ? 'opacity-100' : 'opacity-50'}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `w-8 h-8 rounded-full flex items-center justify-center ${step === 'payment' ? 'bg-white text-blue-600' : 'bg-blue-500'}`,\n                children: /*#__PURE__*/_jsxDEV(CreditCard, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm font-medium\",\n                children: \"2. Pago\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex-1 ${step === 'confirm' ? 'opacity-100' : 'opacity-50'}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `w-8 h-8 rounded-full flex items-center justify-center ${step === 'confirm' ? 'bg-white text-blue-600' : 'bg-blue-500'}`,\n                children: /*#__PURE__*/_jsxDEV(CheckCircle, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm font-medium\",\n                children: \"3. Confirmar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 rounded-lg p-4 mb-6 border-2 border-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold mb-3 text-gray-700\",\n            children: \"\\uD83D\\uDCB0 Resumen de Cuenta\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Habitaci\\xF3n (\", booking.number_of_nights || 1, \" noche\", (booking.number_of_nights || 1) > 1 ? 's' : '', \"):\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: [\"Bs. \", parseFloat(booking.base_price * (booking.number_of_nights || 1)).toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 15\n            }, this), parseFloat(booking.additional_charges || 0) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\uD83D\\uDCE6 Cargos adicionales (productos):\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: [\"Bs. \", parseFloat(booking.additional_charges).toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 17\n            }, this), ((_booking$late_checkou = booking.late_checkout_info) === null || _booking$late_checkou === void 0 ? void 0 : _booking$late_checkou.is_late) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between text-orange-600 bg-orange-50 p-2 rounded\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"\\u23F0 Late checkout (\", booking.late_checkout_info.hours_late, \"h):\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: [\"+ Bs. \", booking.late_checkout_info.late_checkout_charge.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 17\n            }, this), discountAmount > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between text-green-600\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Descuento aplicado:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: [\"-Bs. \", discountAmount.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border-t-2 pt-2 flex justify-between font-bold text-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"TOTAL A PAGAR:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-blue-600\",\n                children: [\"Bs. \", totalWithDiscount.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between text-green-600\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Ya pagado:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: [\"Bs. \", parseFloat(booking.amount_paid || 0).toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border-t-2 border-red-200 pt-2 flex justify-between font-bold text-xl\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"SALDO PENDIENTE:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: finalBalance > 0.01 ? 'text-red-600' : 'text-green-600',\n                children: [\"Bs. \", finalBalance.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this), step === 'discount' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-lg\",\n            children: \"Aplicar Descuento (Opcional)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 15\n          }, this), discountPresets.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"label\",\n              children: \"Descuentos Disponibles:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-3\",\n              children: discountPresets.map(discount => /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  setSelectedDiscount(discount);\n                  setCustomDiscount({\n                    type: 'percentage',\n                    value: '',\n                    reason: ''\n                  });\n                },\n                className: `p-4 border-2 rounded-lg text-left transition-all ${(selectedDiscount === null || selectedDiscount === void 0 ? void 0 : selectedDiscount.id) === discount.id ? 'border-green-500 bg-green-50' : 'border-gray-200 hover:border-green-300'}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between items-start mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-semibold\",\n                    children: discount.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 336,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"badge badge-success\",\n                    children: discount.discount_type === 'percentage' ? `${discount.discount_value}%` : `Bs. ${discount.discount_value}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 337,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 335,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-gray-600\",\n                  children: discount.reason\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 25\n                }, this)]\n              }, discount.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500 text-sm\",\n            children: \"No hay descuentos predefinidos disponibles\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-t pt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"label\",\n              children: \"O ingresa un descuento personalizado:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-3 gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"input\",\n                value: customDiscount.type,\n                onChange: e => {\n                  setCustomDiscount({\n                    ...customDiscount,\n                    type: e.target.value\n                  });\n                  setSelectedDiscount(null);\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"percentage\",\n                  children: \"Porcentaje (%)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"fixed\",\n                  children: \"Monto Fijo (Bs.)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                className: \"input\",\n                placeholder: \"Valor\",\n                step: \"0.01\",\n                value: customDiscount.value,\n                onChange: e => {\n                  setCustomDiscount({\n                    ...customDiscount,\n                    value: e.target.value\n                  });\n                  setSelectedDiscount(null);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"input\",\n                placeholder: \"Raz\\xF3n\",\n                value: customDiscount.reason,\n                onChange: e => setCustomDiscount({\n                  ...customDiscount,\n                  reason: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 15\n          }, this), discountAmount > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-green-50 border border-green-200 rounded-lg p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-green-800 font-semibold\",\n              children: [\"\\u2713 Descuento: Bs. \", discountAmount.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-green-700\",\n              children: [\"Nuevo total: Bs. \", totalWithDiscount.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setStep('payment'),\n              className: \"btn-secondary flex-1\",\n              children: \"Saltar (sin descuento)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleApplyDiscount,\n              disabled: discountAmount === 0 || loading,\n              className: \"btn-primary flex-1\",\n              children: loading ? 'Aplicando...' : 'Aplicar y Continuar'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 13\n        }, this), step === 'payment' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-lg\",\n            children: \"Registrar Pago\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"label\",\n              children: \"Monto a Cobrar *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              className: \"input text-2xl font-bold\",\n              step: \"0.01\",\n              value: paymentData.amount,\n              onChange: e => setPaymentData({\n                ...paymentData,\n                amount: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2 mt-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => setPaymentData({\n                  ...paymentData,\n                  amount: totalWithDiscount.toFixed(2)\n                }),\n                className: \"text-sm btn-secondary\",\n                children: \"Total completo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => setPaymentData({\n                  ...paymentData,\n                  amount: (totalWithDiscount / 2).toFixed(2)\n                }),\n                className: \"text-sm btn-secondary\",\n                children: \"50%\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"label\",\n              children: \"M\\xE9todo de Pago *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-3 gap-3\",\n              children: [{\n                value: 'cash',\n                label: 'Efectivo',\n                icon: 'ðŸ’µ'\n              }, {\n                value: 'card',\n                label: 'Tarjeta/QR',\n                icon: 'ðŸ’³'\n              }, {\n                value: 'transfer',\n                label: 'Transferencia',\n                icon: 'ðŸ¦'\n              }].map(method => /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => setPaymentData({\n                  ...paymentData,\n                  payment_method: method.value\n                }),\n                className: `p-4 border-2 rounded-lg transition-all ${paymentData.payment_method === method.value ? 'border-blue-500 bg-blue-50' : 'border-gray-200 hover:border-blue-300'}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-2xl mb-1\",\n                  children: method.icon\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm font-medium\",\n                  children: method.label\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 469,\n                  columnNumber: 23\n                }, this)]\n              }, method.value, true, {\n                fileName: _jsxFileName,\n                lineNumber: 458,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 15\n          }, this), paymentData.payment_method === 'card' && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"label\",\n              children: \"\\xDAltimos 4 d\\xEDgitos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"input\",\n              maxLength: \"4\",\n              placeholder: \"1234\",\n              value: paymentData.card_last_digits,\n              onChange: e => setPaymentData({\n                ...paymentData,\n                card_last_digits: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 17\n          }, this), (paymentData.payment_method === 'transfer' || paymentData.payment_method === 'card') && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"label\",\n              children: \"Referencia/Nro. Transacci\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"input\",\n              placeholder: \"Ej: TRX123456\",\n              value: paymentData.transaction_reference,\n              onChange: e => setPaymentData({\n                ...paymentData,\n                transaction_reference: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"label\",\n              children: \"Notas (Opcional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"input\",\n              rows: \"2\",\n              placeholder: \"Observaciones del pago...\",\n              value: paymentData.notes,\n              onChange: e => setPaymentData({\n                ...paymentData,\n                notes: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 15\n          }, this), finalBalance < -0.01 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-yellow-50 border border-yellow-200 rounded-lg p-4\",\n            children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n              className: \"w-5 h-5 text-yellow-600 inline mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-yellow-800 font-semibold\",\n              children: [\"Cambio a devolver: Bs. \", Math.abs(finalBalance).toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setStep('discount'),\n              className: \"btn-secondary flex-1\",\n              children: \"Atr\\xE1s\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 523,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handlePayment,\n              disabled: loading,\n              className: \"btn-primary flex-1\",\n              children: loading ? 'Procesando...' : 'Registrar Pago'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 13\n        }, this), step === 'confirm' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n              className: \"w-16 h-16 text-green-500 mx-auto mb-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 546,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-2xl font-bold text-gray-800 mb-2\",\n              children: \"\\xA1Listo para Checkout!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600\",\n              children: \"Todos los pagos han sido registrados correctamente\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 548,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 15\n          }, this), ((_booking$late_checkou2 = booking.late_checkout_info) === null || _booking$late_checkou2 === void 0 ? void 0 : _booking$late_checkou2.is_late) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-orange-50 border border-orange-200 rounded-lg p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-orange-800 font-semibold mb-1\",\n              children: [\"\\u23F0 Salida tard\\xEDa: \", booking.late_checkout_info.hours_late, \" hora(s)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-orange-700\",\n              children: [\"Cargo adicional cobrado: Bs. \", booking.late_checkout_info.late_checkout_charge.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-green-50 border border-green-200 rounded-lg p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-green-800 mb-2\",\n              children: \"Resumen Final:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 565,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-1 text-sm text-green-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Total facturado:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 568,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-semibold\",\n                  children: [\"Bs. \", totalWithDiscount.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 569,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 567,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Total cobrado:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 572,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-semibold\",\n                  children: [\"Bs. \", totalWithDiscount.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 573,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 571,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between font-bold\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Balance:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 576,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Bs. 0.00 \\u2713\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 577,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 566,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 564,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-50 border border-blue-300 rounded-lg p-4\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-blue-800 text-sm\",\n              children: [\"\\uD83D\\uDCF1 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"WhatsApp:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 584,\n                columnNumber: 22\n              }, this), \" Se enviar\\xE1 notificaci\\xF3n autom\\xE1tica al administrador al confirmar el checkout.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 583,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 582,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-3\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleCheckout,\n              disabled: loading,\n              className: \"btn-success flex-1 py-4 text-lg\",\n              children: loading ? 'Procesando...' : 'âœ“ Confirmar Checkout & Enviar WhatsApp'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 589,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 588,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 5\n  }, this);\n};\n_s(CheckoutModal, \"z7zfLCFAO+xfRH/PvWdDtalUBn0=\");\n_c = CheckoutModal;\nexport default CheckoutModal;\nvar _c;\n$RefreshReg$(_c, \"CheckoutModal\");","map":{"version":3,"names":["React","useState","useEffect","X","CreditCard","DollarSign","Tag","AlertCircle","CheckCircle","createPayment","checkout","getDiscountPresets","applyDiscount","jsxDEV","_jsxDEV","CheckoutModal","booking","onClose","onSuccess","_s","_safeBooking$late_che","_booking$late_checkou","_booking$late_checkou2","notification","setNotification","safeBooking","currentBalance","current_balance","undefined","parseFloat","total_amount","late_checkout_info","late_checkout_charge","amount_paid","step","setStep","discountPresets","setDiscountPresets","loading","setLoading","paymentData","setPaymentData","booking_id","id","amount","toFixed","payment_method","card_last_digits","transaction_reference","notes","selectedDiscount","setSelectedDiscount","customDiscount","setCustomDiscount","type","value","reason","loadDiscounts","calculateLateCheckout","showNotification","message","setTimeout","getLateCheckoutPreview","preview","is_late","hours_late","hourly_rate","error","console","data","filter","d","is_active","calculateDiscount","_safeBooking$late_che2","baseAmount","discount_type","discount_value","discountAmount","totalWithDiscount","finalBalance","handleApplyDiscount","discountData","discount_preset_id","newBalance","window","location","reload","_error$response","_error$response$data","response","handlePayment","_error$response2","_error$response2$data","handleCheckout","_error$response3","_error$response3$data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","full_name","customer_name","room_number","booking_code","onClick","number_of_nights","base_price","additional_charges","length","map","discount","name","onChange","e","target","placeholder","disabled","label","icon","method","maxLength","rows","Math","abs","_c","$RefreshReg$"],"sources":["C:/Users/WILLIAM/Desktop/hotel-system/frontend/src/components/cashier/CheckoutModal.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { X, CreditCard, DollarSign, Tag, AlertCircle, CheckCircle } from 'lucide-react';\r\nimport { createPayment, checkout, getDiscountPresets, applyDiscount } from '../../services/api';\r\n\r\nconst CheckoutModal = ({ booking, onClose, onSuccess }) => {\r\n  // Estado de notificaciones\r\n  const [notification, setNotification] = useState(null);\r\n\r\n  // PRIMERO: Calcular valores seguros con defaults\r\n  const safeBooking = booking || {};\r\n  const currentBalance = safeBooking.current_balance !== undefined \r\n    ? safeBooking.current_balance\r\n    : (parseFloat(safeBooking.total_amount || 0) + \r\n       (safeBooking.late_checkout_info?.late_checkout_charge || 0) - \r\n       parseFloat(safeBooking.amount_paid || 0));\r\n\r\n  // SEGUNDO: Todos los hooks\r\n  const [step, setStep] = useState(currentBalance > 0.01 ? 'payment' : 'confirm');\r\n  const [discountPresets, setDiscountPresets] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Estado del pago - INCLUIR booking_id\r\n  const [paymentData, setPaymentData] = useState({\r\n    booking_id: safeBooking.id,\r\n    amount: currentBalance.toFixed(2),\r\n    payment_method: 'cash',\r\n    card_last_digits: '',\r\n    transaction_reference: '',\r\n    notes: ''\r\n  });\r\n\r\n  // Estado del descuento\r\n  const [selectedDiscount, setSelectedDiscount] = useState(null);\r\n  const [customDiscount, setCustomDiscount] = useState({\r\n    type: 'percentage',\r\n    value: '',\r\n    reason: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (safeBooking.id) {\r\n      loadDiscounts();\r\n      calculateLateCheckout();\r\n    }\r\n  }, [safeBooking.id]);\r\n\r\n  // âœ… FunciÃ³n para mostrar notificaciones\r\n  const showNotification = (message, type = 'info') => {\r\n    setNotification({ message, type });\r\n    setTimeout(() => setNotification(null), 4000);\r\n  };\r\n\r\n  const calculateLateCheckout = async () => {\r\n    try {\r\n      const { getLateCheckoutPreview } = await import('../../services/api');\r\n      const preview = await getLateCheckoutPreview(safeBooking.id);\r\n      \r\n      if (preview.is_late && preview.late_checkout_charge > 0) {\r\n        safeBooking.late_checkout_info = {\r\n          is_late: true,\r\n          hours_late: preview.hours_late,\r\n          late_checkout_charge: preview.late_checkout_charge,\r\n          hourly_rate: preview.hourly_rate\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al calcular late checkout:', error);\r\n    }\r\n  };\r\n  \r\n  // TERCERO: ValidaciÃ³n DESPUÃ‰S de los hooks\r\n  if (!booking || !booking.id) {\r\n    return null;\r\n  }\r\n\r\n  const loadDiscounts = async () => {\r\n    try {\r\n      const data = await getDiscountPresets();\r\n      setDiscountPresets(data.filter(d => d.is_active));\r\n    } catch (error) {\r\n      console.error('Error al cargar descuentos:', error);\r\n    }\r\n  };\r\n\r\n  const calculateDiscount = () => {\r\n    if (!selectedDiscount && !customDiscount.value) return 0;\r\n\r\n    const baseAmount = parseFloat(safeBooking.total_amount || 0) + \r\n                      (safeBooking.late_checkout_info?.late_checkout_charge || 0);\r\n    if (selectedDiscount) {\r\n      if (selectedDiscount.discount_type === 'percentage') {\r\n        return (baseAmount * parseFloat(selectedDiscount.discount_value)) / 100;\r\n      }\r\n      return parseFloat(selectedDiscount.discount_value);\r\n    }\r\n\r\n    if (customDiscount.value) {\r\n      if (customDiscount.type === 'percentage') {\r\n        return (baseAmount * parseFloat(customDiscount.value)) / 100;\r\n      }\r\n      return parseFloat(customDiscount.value);\r\n    }\r\n\r\n    return 0;\r\n  };\r\n\r\n  const discountAmount = calculateDiscount();\r\n  const totalWithDiscount = currentBalance - discountAmount;\r\n  const finalBalance = totalWithDiscount - parseFloat(paymentData.amount || 0);\r\n\r\n  const handleApplyDiscount = async () => {\r\n    if (discountAmount === 0) {\r\n      setStep('payment');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const discountData = selectedDiscount ? {\r\n        discount_preset_id: selectedDiscount.id,\r\n        discount_type: selectedDiscount.discount_type,\r\n        discount_value: selectedDiscount.discount_value,\r\n        reason: selectedDiscount.reason\r\n      } : {\r\n        discount_type: customDiscount.type,\r\n        discount_value: customDiscount.value,\r\n        reason: customDiscount.reason || 'Descuento personalizado'\r\n      };\r\n\r\n      await applyDiscount(booking.id, discountData);\r\n      \r\n      showNotification(`âœ“ Descuento de Bs. ${discountAmount.toFixed(2)} aplicado exitosamente`, 'success');\r\n      setStep('payment');\r\n      \r\n      const newBalance = totalWithDiscount;\r\n      setPaymentData({ \r\n        ...paymentData, \r\n        amount: newBalance.toFixed(2) \r\n      });\r\n      \r\n      setTimeout(() => window.location.reload(), 1500);\r\n    } catch (error) {\r\n      showNotification(error.response?.data?.error || 'Error al aplicar descuento', 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handlePayment = async () => {\r\n    if (parseFloat(paymentData.amount) <= 0) {\r\n      showNotification('El monto debe ser mayor a 0', 'error');\r\n      return;\r\n    }\r\n\r\n    if (paymentData.payment_method === 'card' && !paymentData.card_last_digits) {\r\n      showNotification('Ingrese los Ãºltimos 4 dÃ­gitos de la tarjeta', 'error');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      await createPayment(paymentData);\r\n      \r\n      if (finalBalance <= 0.01) {\r\n        showNotification('âœ… Pago registrado exitosamente', 'success');\r\n        setTimeout(() => setStep('confirm'), 1000);\r\n      } else {\r\n        showNotification(`Pago registrado. Saldo restante: Bs. ${finalBalance.toFixed(2)}`, 'success');\r\n        setTimeout(() => onSuccess(), 1500);\r\n      }\r\n    } catch (error) {\r\n      showNotification(error.response?.data?.error || 'Error al registrar pago', 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCheckout = async () => {\r\n    if (finalBalance > 0.01) {\r\n      showNotification('Debe cobrar el saldo pendiente antes del checkout', 'error');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      await checkout(booking.id);\r\n      showNotification('âœ… Check-out completado. WhatsApp enviado al administrador.', 'success');\r\n      setTimeout(() => onSuccess(), 2000);\r\n    } catch (error) {\r\n      showNotification(error.response?.data?.error || 'Error al realizar checkout', 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto relative\">\r\n        {/* âœ… NOTIFICACIÃ“N VISUAL (NO ALERT) */}\r\n        {notification && (\r\n          <div className={`absolute top-4 left-4 right-4 z-10 p-4 rounded-lg shadow-2xl animate-bounce ${\r\n            notification.type === 'success' ? 'bg-green-500 text-white' :\r\n            notification.type === 'error' ? 'bg-red-500 text-white' :\r\n            'bg-blue-500 text-white'\r\n          }`}>\r\n            <p className=\"font-bold text-center\">{notification.message}</p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Header */}\r\n        <div className=\"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 sticky top-0 z-5\">\r\n          <div className=\"flex justify-between items-start\">\r\n            <div>\r\n              <h2 className=\"text-2xl font-bold mb-1\">Proceso de Checkout</h2>\r\n              <p className=\"text-blue-100\">\r\n                {booking.full_name || booking.customer_name} â€¢ HAB {booking.room_number}\r\n              </p>\r\n              <p className=\"text-xs text-blue-200 mt-1\">{booking.booking_code}</p>\r\n            </div>\r\n            <button onClick={onClose} className=\"text-white hover:bg-white/20 p-2 rounded\">\r\n              <X className=\"w-6 h-6\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Steps */}\r\n          <div className=\"flex gap-4 mt-6\">\r\n            <div className={`flex-1 ${step === 'discount' ? 'opacity-100' : 'opacity-50'}`}>\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className={`w-8 h-8 rounded-full flex items-center justify-center ${\r\n                  step === 'discount' ? 'bg-white text-blue-600' : 'bg-blue-500'\r\n                }`}>\r\n                  <Tag className=\"w-4 h-4\" />\r\n                </div>\r\n                <span className=\"text-sm font-medium\">1. Descuentos</span>\r\n              </div>\r\n            </div>\r\n            <div className={`flex-1 ${step === 'payment' ? 'opacity-100' : 'opacity-50'}`}>\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className={`w-8 h-8 rounded-full flex items-center justify-center ${\r\n                  step === 'payment' ? 'bg-white text-blue-600' : 'bg-blue-500'\r\n                }`}>\r\n                  <CreditCard className=\"w-4 h-4\" />\r\n                </div>\r\n                <span className=\"text-sm font-medium\">2. Pago</span>\r\n              </div>\r\n            </div>\r\n            <div className={`flex-1 ${step === 'confirm' ? 'opacity-100' : 'opacity-50'}`}>\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className={`w-8 h-8 rounded-full flex items-center justify-center ${\r\n                  step === 'confirm' ? 'bg-white text-blue-600' : 'bg-blue-500'\r\n                }`}>\r\n                  <CheckCircle className=\"w-4 h-4\" />\r\n                </div>\r\n                <span className=\"text-sm font-medium\">3. Confirmar</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-6\">\r\n          {/* Resumen Financiero Siempre Visible */}\r\n          <div className=\"bg-gray-50 rounded-lg p-4 mb-6 border-2 border-gray-200\">\r\n            <h3 className=\"font-semibold mb-3 text-gray-700\">ðŸ’° Resumen de Cuenta</h3>\r\n            <div className=\"space-y-2 text-sm\">\r\n              <div className=\"flex justify-between\">\r\n                <span>HabitaciÃ³n ({booking.number_of_nights || 1} noche{(booking.number_of_nights || 1) > 1 ? 's' : ''}):</span>\r\n                <span className=\"font-semibold\">Bs. {parseFloat(booking.base_price * (booking.number_of_nights || 1)).toFixed(2)}</span>\r\n              </div>\r\n              \r\n              {parseFloat(booking.additional_charges || 0) > 0 && (\r\n                <div className=\"flex justify-between\">\r\n                  <span>ðŸ“¦ Cargos adicionales (productos):</span>\r\n                  <span className=\"font-semibold\">Bs. {parseFloat(booking.additional_charges).toFixed(2)}</span>\r\n                </div>\r\n              )}\r\n\r\n              {booking.late_checkout_info?.is_late && (\r\n                <div className=\"flex justify-between text-orange-600 bg-orange-50 p-2 rounded\">\r\n                  <span>â° Late checkout ({booking.late_checkout_info.hours_late}h):</span>\r\n                  <span className=\"font-semibold\">\r\n                    + Bs. {booking.late_checkout_info.late_checkout_charge.toFixed(2)}\r\n                  </span>\r\n                </div>\r\n              )}\r\n\r\n              {discountAmount > 0 && (\r\n                <div className=\"flex justify-between text-green-600\">\r\n                  <span>Descuento aplicado:</span>\r\n                  <span className=\"font-semibold\">-Bs. {discountAmount.toFixed(2)}</span>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"border-t-2 pt-2 flex justify-between font-bold text-lg\">\r\n                <span>TOTAL A PAGAR:</span>\r\n                <span className=\"text-blue-600\">Bs. {totalWithDiscount.toFixed(2)}</span>\r\n              </div>\r\n\r\n              <div className=\"flex justify-between text-green-600\">\r\n                <span>Ya pagado:</span>\r\n                <span className=\"font-semibold\">Bs. {parseFloat(booking.amount_paid || 0).toFixed(2)}</span>\r\n              </div>\r\n\r\n              <div className=\"border-t-2 border-red-200 pt-2 flex justify-between font-bold text-xl\">\r\n                <span>SALDO PENDIENTE:</span>\r\n                <span className={finalBalance > 0.01 ? 'text-red-600' : 'text-green-600'}>\r\n                  Bs. {finalBalance.toFixed(2)}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* STEP 1: Aplicar Descuento */}\r\n          {step === 'discount' && (\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"font-semibold text-lg\">Aplicar Descuento (Opcional)</h3>\r\n              \r\n              {discountPresets.length > 0 ? (\r\n                <div>\r\n                  <label className=\"label\">Descuentos Disponibles:</label>\r\n                  <div className=\"grid grid-cols-2 gap-3\">\r\n                    {discountPresets.map(discount => (\r\n                      <button\r\n                        key={discount.id}\r\n                        type=\"button\"\r\n                        onClick={() => {\r\n                          setSelectedDiscount(discount);\r\n                          setCustomDiscount({ type: 'percentage', value: '', reason: '' });\r\n                        }}\r\n                        className={`p-4 border-2 rounded-lg text-left transition-all ${\r\n                          selectedDiscount?.id === discount.id\r\n                            ? 'border-green-500 bg-green-50'\r\n                            : 'border-gray-200 hover:border-green-300'\r\n                        }`}\r\n                      >\r\n                        <div className=\"flex justify-between items-start mb-2\">\r\n                          <span className=\"font-semibold\">{discount.name}</span>\r\n                          <span className=\"badge badge-success\">\r\n                            {discount.discount_type === 'percentage' \r\n                              ? `${discount.discount_value}%` \r\n                              : `Bs. ${discount.discount_value}`}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-xs text-gray-600\">{discount.reason}</p>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <p className=\"text-gray-500 text-sm\">No hay descuentos predefinidos disponibles</p>\r\n              )}\r\n\r\n              <div className=\"border-t pt-4\">\r\n                <label className=\"label\">O ingresa un descuento personalizado:</label>\r\n                <div className=\"grid grid-cols-3 gap-3\">\r\n                  <select\r\n                    className=\"input\"\r\n                    value={customDiscount.type}\r\n                    onChange={(e) => {\r\n                      setCustomDiscount({ ...customDiscount, type: e.target.value });\r\n                      setSelectedDiscount(null);\r\n                    }}\r\n                  >\r\n                    <option value=\"percentage\">Porcentaje (%)</option>\r\n                    <option value=\"fixed\">Monto Fijo (Bs.)</option>\r\n                  </select>\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"input\"\r\n                    placeholder=\"Valor\"\r\n                    step=\"0.01\"\r\n                    value={customDiscount.value}\r\n                    onChange={(e) => {\r\n                      setCustomDiscount({ ...customDiscount, value: e.target.value });\r\n                      setSelectedDiscount(null);\r\n                    }}\r\n                  />\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"input\"\r\n                    placeholder=\"RazÃ³n\"\r\n                    value={customDiscount.reason}\r\n                    onChange={(e) => setCustomDiscount({ ...customDiscount, reason: e.target.value })}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {discountAmount > 0 && (\r\n                <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n                  <p className=\"text-green-800 font-semibold\">\r\n                    âœ“ Descuento: Bs. {discountAmount.toFixed(2)}\r\n                  </p>\r\n                  <p className=\"text-sm text-green-700\">\r\n                    Nuevo total: Bs. {totalWithDiscount.toFixed(2)}\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setStep('payment')}\r\n                  className=\"btn-secondary flex-1\"\r\n                >\r\n                  Saltar (sin descuento)\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleApplyDiscount}\r\n                  disabled={discountAmount === 0 || loading}\r\n                  className=\"btn-primary flex-1\"\r\n                >\r\n                  {loading ? 'Aplicando...' : 'Aplicar y Continuar'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* STEP 2: Registrar Pago */}\r\n          {step === 'payment' && (\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"font-semibold text-lg\">Registrar Pago</h3>\r\n\r\n              <div>\r\n                <label className=\"label\">Monto a Cobrar *</label>\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"input text-2xl font-bold\"\r\n                  step=\"0.01\"\r\n                  value={paymentData.amount}\r\n                  onChange={(e) => setPaymentData({ ...paymentData, amount: e.target.value })}\r\n                />\r\n                <div className=\"flex gap-2 mt-2\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setPaymentData({ ...paymentData, amount: totalWithDiscount.toFixed(2) })}\r\n                    className=\"text-sm btn-secondary\"\r\n                  >\r\n                    Total completo\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setPaymentData({ ...paymentData, amount: (totalWithDiscount / 2).toFixed(2) })}\r\n                    className=\"text-sm btn-secondary\"\r\n                  >\r\n                    50%\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"label\">MÃ©todo de Pago *</label>\r\n                <div className=\"grid grid-cols-3 gap-3\">\r\n                  {[\r\n                    { value: 'cash', label: 'Efectivo', icon: 'ðŸ’µ' },\r\n                    { value: 'card', label: 'Tarjeta/QR', icon: 'ðŸ’³' },\r\n                    { value: 'transfer', label: 'Transferencia', icon: 'ðŸ¦' }\r\n                  ].map(method => (\r\n                    <button\r\n                      key={method.value}\r\n                      type=\"button\"\r\n                      onClick={() => setPaymentData({ ...paymentData, payment_method: method.value })}\r\n                      className={`p-4 border-2 rounded-lg transition-all ${\r\n                        paymentData.payment_method === method.value\r\n                          ? 'border-blue-500 bg-blue-50'\r\n                          : 'border-gray-200 hover:border-blue-300'\r\n                      }`}\r\n                    >\r\n                      <div className=\"text-2xl mb-1\">{method.icon}</div>\r\n                      <div className=\"text-sm font-medium\">{method.label}</div>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {paymentData.payment_method === 'card' && (\r\n                <div>\r\n                  <label className=\"label\">Ãšltimos 4 dÃ­gitos</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"input\"\r\n                    maxLength=\"4\"\r\n                    placeholder=\"1234\"\r\n                    value={paymentData.card_last_digits}\r\n                    onChange={(e) => setPaymentData({ ...paymentData, card_last_digits: e.target.value })}\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              {(paymentData.payment_method === 'transfer' || paymentData.payment_method === 'card') && (\r\n                <div>\r\n                  <label className=\"label\">Referencia/Nro. TransacciÃ³n</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"input\"\r\n                    placeholder=\"Ej: TRX123456\"\r\n                    value={paymentData.transaction_reference}\r\n                    onChange={(e) => setPaymentData({ ...paymentData, transaction_reference: e.target.value })}\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              <div>\r\n                <label className=\"label\">Notas (Opcional)</label>\r\n                <textarea\r\n                  className=\"input\"\r\n                  rows=\"2\"\r\n                  placeholder=\"Observaciones del pago...\"\r\n                  value={paymentData.notes}\r\n                  onChange={(e) => setPaymentData({ ...paymentData, notes: e.target.value })}\r\n                />\r\n              </div>\r\n\r\n              {finalBalance < -0.01 && (\r\n                <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\r\n                  <AlertCircle className=\"w-5 h-5 text-yellow-600 inline mr-2\" />\r\n                  <span className=\"text-yellow-800 font-semibold\">\r\n                    Cambio a devolver: Bs. {Math.abs(finalBalance).toFixed(2)}\r\n                  </span>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setStep('discount')}\r\n                  className=\"btn-secondary flex-1\"\r\n                >\r\n                  AtrÃ¡s\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handlePayment}\r\n                  disabled={loading}\r\n                  className=\"btn-primary flex-1\"\r\n                >\r\n                  {loading ? 'Procesando...' : 'Registrar Pago'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* STEP 3: Confirmar Checkout */}\r\n          {step === 'confirm' && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"text-center\">\r\n                <CheckCircle className=\"w-16 h-16 text-green-500 mx-auto mb-4\" />\r\n                <h3 className=\"text-2xl font-bold text-gray-800 mb-2\">Â¡Listo para Checkout!</h3>\r\n                <p className=\"text-gray-600\">\r\n                  Todos los pagos han sido registrados correctamente\r\n                </p>\r\n              </div>\r\n\r\n              {booking.late_checkout_info?.is_late && (\r\n                <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-4\">\r\n                  <p className=\"text-orange-800 font-semibold mb-1\">\r\n                    â° Salida tardÃ­a: {booking.late_checkout_info.hours_late} hora(s)\r\n                  </p>\r\n                  <p className=\"text-sm text-orange-700\">\r\n                    Cargo adicional cobrado: Bs. {booking.late_checkout_info.late_checkout_charge.toFixed(2)}\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n                <h4 className=\"font-semibold text-green-800 mb-2\">Resumen Final:</h4>\r\n                <div className=\"space-y-1 text-sm text-green-700\">\r\n                  <div className=\"flex justify-between\">\r\n                    <span>Total facturado:</span>\r\n                    <span className=\"font-semibold\">Bs. {totalWithDiscount.toFixed(2)}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span>Total cobrado:</span>\r\n                    <span className=\"font-semibold\">Bs. {totalWithDiscount.toFixed(2)}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between font-bold\">\r\n                    <span>Balance:</span>\r\n                    <span>Bs. 0.00 âœ“</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-blue-50 border border-blue-300 rounded-lg p-4\">\r\n                <p className=\"text-blue-800 text-sm\">\r\n                  ðŸ“± <strong>WhatsApp:</strong> Se enviarÃ¡ notificaciÃ³n automÃ¡tica al administrador al confirmar el checkout.\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleCheckout}\r\n                  disabled={loading}\r\n                  className=\"btn-success flex-1 py-4 text-lg\"\r\n                >\r\n                  {loading ? 'Procesando...' : 'âœ“ Confirmar Checkout & Enviar WhatsApp'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CheckoutModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}